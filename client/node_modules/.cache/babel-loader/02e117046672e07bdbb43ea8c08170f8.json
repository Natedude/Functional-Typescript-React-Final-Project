{"ast":null,"code":"import { Gain } from \"../../core/context/Gain\";\nimport { ToneAudioNode } from \"../../core/context/ToneAudioNode\";\nimport { optionsFromArguments } from \"../../core/util/Defaults\";\n/**\n * Solo lets you isolate a specific audio stream. When an instance is set to `solo=true`,\n * it will mute all other instances of Solo.\n * @example\n * const soloA = new Tone.Solo().toDestination();\n * const oscA = new Tone.Oscillator(\"C4\", \"sawtooth\").connect(soloA);\n * const soloB = new Tone.Solo().toDestination();\n * const oscB = new Tone.Oscillator(\"E4\", \"square\").connect(soloB);\n * soloA.solo = true;\n * // no audio will pass through soloB\n * @category Component\n */\n\nexport class Solo extends ToneAudioNode {\n  constructor() {\n    super(optionsFromArguments(Solo.getDefaults(), arguments, [\"solo\"]));\n    this.name = \"Solo\";\n    const options = optionsFromArguments(Solo.getDefaults(), arguments, [\"solo\"]);\n    this.input = this.output = new Gain({\n      context: this.context\n    });\n\n    if (!Solo._allSolos.has(this.context)) {\n      Solo._allSolos.set(this.context, new Set());\n    }\n\n    Solo._allSolos.get(this.context).add(this); // set initially\n\n\n    this.solo = options.solo;\n  }\n\n  static getDefaults() {\n    return Object.assign(ToneAudioNode.getDefaults(), {\n      solo: false\n    });\n  }\n  /**\n   * Isolates this instance and mutes all other instances of Solo.\n   * Only one instance can be soloed at a time. A soloed\n   * instance will report `solo=false` when another instance is soloed.\n   */\n\n\n  get solo() {\n    return this._isSoloed();\n  }\n\n  set solo(solo) {\n    if (solo) {\n      this._addSolo();\n    } else {\n      this._removeSolo();\n    }\n\n    Solo._allSolos.get(this.context).forEach(instance => instance._updateSolo());\n  }\n  /**\n   * If the current instance is muted, i.e. another instance is soloed\n   */\n\n\n  get muted() {\n    return this.input.gain.value === 0;\n  }\n  /**\n   * Add this to the soloed array\n   */\n\n\n  _addSolo() {\n    if (!Solo._soloed.has(this.context)) {\n      Solo._soloed.set(this.context, new Set());\n    }\n\n    Solo._soloed.get(this.context).add(this);\n  }\n  /**\n   * Remove this from the soloed array\n   */\n\n\n  _removeSolo() {\n    if (Solo._soloed.has(this.context)) {\n      Solo._soloed.get(this.context).delete(this);\n    }\n  }\n  /**\n   * Is this on the soloed array\n   */\n\n\n  _isSoloed() {\n    return Solo._soloed.has(this.context) && Solo._soloed.get(this.context).has(this);\n  }\n  /**\n   * Returns true if no one is soloed\n   */\n\n\n  _noSolos() {\n    // either does not have any soloed added\n    return !Solo._soloed.has(this.context) || Solo._soloed.has(this.context) && Solo._soloed.get(this.context).size === 0;\n  }\n  /**\n   * Solo the current instance and unsolo all other instances.\n   */\n\n\n  _updateSolo() {\n    if (this._isSoloed()) {\n      this.input.gain.value = 1;\n    } else if (this._noSolos()) {\n      // no one is soloed\n      this.input.gain.value = 1;\n    } else {\n      this.input.gain.value = 0;\n    }\n  }\n\n  dispose() {\n    super.dispose();\n\n    Solo._allSolos.get(this.context).delete(this);\n\n    this._removeSolo();\n\n    return this;\n  }\n\n}\n/**\n * Hold all of the solo'ed tracks belonging to a specific context\n */\n\nSolo._allSolos = new Map();\n/**\n * Hold the currently solo'ed instance(s)\n */\n\nSolo._soloed = new Map();","map":{"version":3,"sources":["../../../../Tone/component/channel/Solo.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { Gain } from \"../../core/context/Gain\";\nimport { ToneAudioNode } from \"../../core/context/ToneAudioNode\";\nimport { optionsFromArguments } from \"../../core/util/Defaults\";\n/**\n * Solo lets you isolate a specific audio stream. When an instance is set to `solo=true`,\n * it will mute all other instances of Solo.\n * @example\n * const soloA = new Tone.Solo().toDestination();\n * const oscA = new Tone.Oscillator(\"C4\", \"sawtooth\").connect(soloA);\n * const soloB = new Tone.Solo().toDestination();\n * const oscB = new Tone.Oscillator(\"E4\", \"square\").connect(soloB);\n * soloA.solo = true;\n * // no audio will pass through soloB\n * @category Component\n */\nexport class Solo extends ToneAudioNode {\n    constructor() {\n        super(optionsFromArguments(Solo.getDefaults(), arguments, [\"solo\"]));\n        this.name = \"Solo\";\n        const options = optionsFromArguments(Solo.getDefaults(), arguments, [\"solo\"]);\n        this.input = this.output = new Gain({\n            context: this.context,\n        });\n        if (!Solo._allSolos.has(this.context)) {\n            Solo._allSolos.set(this.context, new Set());\n        }\n        Solo._allSolos.get(this.context).add(this);\n        // set initially\n        this.solo = options.solo;\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            solo: false,\n        });\n    }\n    /**\n     * Isolates this instance and mutes all other instances of Solo.\n     * Only one instance can be soloed at a time. A soloed\n     * instance will report `solo=false` when another instance is soloed.\n     */\n    get solo() {\n        return this._isSoloed();\n    }\n    set solo(solo) {\n        if (solo) {\n            this._addSolo();\n        }\n        else {\n            this._removeSolo();\n        }\n        Solo._allSolos.get(this.context).forEach(instance => instance._updateSolo());\n    }\n    /**\n     * If the current instance is muted, i.e. another instance is soloed\n     */\n    get muted() {\n        return this.input.gain.value === 0;\n    }\n    /**\n     * Add this to the soloed array\n     */\n    _addSolo() {\n        if (!Solo._soloed.has(this.context)) {\n            Solo._soloed.set(this.context, new Set());\n        }\n        Solo._soloed.get(this.context).add(this);\n    }\n    /**\n     * Remove this from the soloed array\n     */\n    _removeSolo() {\n        if (Solo._soloed.has(this.context)) {\n            Solo._soloed.get(this.context).delete(this);\n        }\n    }\n    /**\n     * Is this on the soloed array\n     */\n    _isSoloed() {\n        return Solo._soloed.has(this.context) && Solo._soloed.get(this.context).has(this);\n    }\n    /**\n     * Returns true if no one is soloed\n     */\n    _noSolos() {\n        // either does not have any soloed added\n        return !Solo._soloed.has(this.context) ||\n            // or has a solo set but doesn't include any items\n            (Solo._soloed.has(this.context) && Solo._soloed.get(this.context).size === 0);\n    }\n    /**\n     * Solo the current instance and unsolo all other instances.\n     */\n    _updateSolo() {\n        if (this._isSoloed()) {\n            this.input.gain.value = 1;\n        }\n        else if (this._noSolos()) {\n            // no one is soloed\n            this.input.gain.value = 1;\n        }\n        else {\n            this.input.gain.value = 0;\n        }\n    }\n    dispose() {\n        super.dispose();\n        Solo._allSolos.get(this.context).delete(this);\n        this._removeSolo();\n        return this;\n    }\n}\n/**\n * Hold all of the solo'ed tracks belonging to a specific context\n */\nSolo._allSolos = new Map();\n/**\n * Hold the currently solo'ed instance(s)\n */\nSolo._soloed = new Map();\n//# sourceMappingURL=Solo.js.map"]},"metadata":{},"sourceType":"module"}