{"ast":null,"code":"export const createNativeMediaStreamTrackAudioSourceNodeFactory = (createInvalidStateError, isNativeOfflineAudioContext) => {\n  return (nativeAudioContext, {\n    mediaStreamTrack\n  }) => {\n    // Bug #121: Only Firefox does yet support the MediaStreamTrackAudioSourceNode.\n    if (typeof nativeAudioContext.createMediaStreamTrackSource === 'function') {\n      return nativeAudioContext.createMediaStreamTrackSource(mediaStreamTrack);\n    }\n\n    const mediaStream = new MediaStream([mediaStreamTrack]);\n    const nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(mediaStream); // Bug #120: Firefox does not throw an error if the mediaStream has no audio track.\n\n    if (mediaStreamTrack.kind !== 'audio') {\n      throw createInvalidStateError();\n    } // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\n\n\n    if (isNativeOfflineAudioContext(nativeAudioContext)) {\n      throw new TypeError();\n    }\n\n    return nativeMediaStreamAudioSourceNode;\n  };\n};","map":{"version":3,"sources":["../../../src/factories/native-media-stream-track-audio-source-node-factory.ts"],"names":[],"mappings":"AAEA,OAAO,MAAM,kDAAkD,GAAyD,CACpH,uBADoH,EAEpH,2BAFoH,KAGpH;AACA,SAAO,CAAC,kBAAD,EAAqB;AAAE,IAAA;AAAF,GAArB,KAA6C;AAChD;AACA,QAAI,OAAO,kBAAkB,CAAC,4BAA1B,KAA2D,UAA/D,EAA2E;AACvE,aAAO,kBAAkB,CAAC,4BAAnB,CAAgD,gBAAhD,CAAP;AACH;;AAED,UAAM,WAAW,GAAG,IAAI,WAAJ,CAAgB,CAAC,gBAAD,CAAhB,CAApB;AACA,UAAM,gCAAgC,GAAG,kBAAkB,CAAC,uBAAnB,CAA2C,WAA3C,CAAzC,CAPgD,CAShD;;AACA,QAAI,gBAAgB,CAAC,IAAjB,KAA0B,OAA9B,EAAuC;AACnC,YAAM,uBAAuB,EAA7B;AACH,KAZ+C,CAchD;;;AACA,QAAI,2BAA2B,CAAC,kBAAD,CAA/B,EAAqD;AACjD,YAAM,IAAI,SAAJ,EAAN;AACH;;AAED,WAAO,gCAAP;AACH,GApBD;AAqBH,CAzBM","sourceRoot":"","sourcesContent":["export const createNativeMediaStreamTrackAudioSourceNodeFactory = (createInvalidStateError, isNativeOfflineAudioContext) => {\n    return (nativeAudioContext, { mediaStreamTrack }) => {\n        // Bug #121: Only Firefox does yet support the MediaStreamTrackAudioSourceNode.\n        if (typeof nativeAudioContext.createMediaStreamTrackSource === 'function') {\n            return nativeAudioContext.createMediaStreamTrackSource(mediaStreamTrack);\n        }\n        const mediaStream = new MediaStream([mediaStreamTrack]);\n        const nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(mediaStream);\n        // Bug #120: Firefox does not throw an error if the mediaStream has no audio track.\n        if (mediaStreamTrack.kind !== 'audio') {\n            throw createInvalidStateError();\n        }\n        // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\n        if (isNativeOfflineAudioContext(nativeAudioContext)) {\n            throw new TypeError();\n        }\n        return nativeMediaStreamAudioSourceNode;\n    };\n};\n//# sourceMappingURL=native-media-stream-track-audio-source-node-factory.js.map"]},"metadata":{},"sourceType":"module"}