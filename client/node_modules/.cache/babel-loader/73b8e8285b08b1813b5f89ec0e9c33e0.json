{"ast":null,"code":"export const createTestOfflineAudioContextCurrentTimeSupport = (createNativeGainNode, nativeOfflineAudioContextConstructor) => {\n  return () => {\n    if (nativeOfflineAudioContextConstructor === null) {\n      return Promise.resolve(false);\n    }\n\n    const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100); // Bug #48: Safari does not render an OfflineAudioContext without any connected node.\n\n    const gainNode = createNativeGainNode(nativeOfflineAudioContext, {\n      channelCount: 1,\n      channelCountMode: 'explicit',\n      channelInterpretation: 'discrete',\n      gain: 0\n    }); // Bug #21: Safari does not support promises yet.\n\n    return new Promise(resolve => {\n      nativeOfflineAudioContext.oncomplete = () => {\n        gainNode.disconnect();\n        resolve(nativeOfflineAudioContext.currentTime !== 0);\n      };\n\n      nativeOfflineAudioContext.startRendering();\n    });\n  };\n};","map":{"version":3,"sources":["../../../src/factories/test-offline-audio-context-current-time-support.ts"],"names":[],"mappings":"AAEA,OAAO,MAAM,+CAA+C,GAAsD,CAC9G,oBAD8G,EAE9G,oCAF8G,KAG9G;AACA,SAAO,MAAK;AACR,QAAI,oCAAoC,KAAK,IAA7C,EAAmD;AAC/C,aAAO,OAAO,CAAC,OAAR,CAAgB,KAAhB,CAAP;AACH;;AAED,UAAM,yBAAyB,GAAG,IAAI,oCAAJ,CAAyC,CAAzC,EAA4C,CAA5C,EAA+C,KAA/C,CAAlC,CALQ,CAOR;;AACA,UAAM,QAAQ,GAAG,oBAAoB,CAAC,yBAAD,EAA4B;AAC7D,MAAA,YAAY,EAAE,CAD+C;AAE7D,MAAA,gBAAgB,EAAE,UAF2C;AAG7D,MAAA,qBAAqB,EAAE,UAHsC;AAI7D,MAAA,IAAI,EAAE;AAJuD,KAA5B,CAArC,CARQ,CAeR;;AACA,WAAO,IAAI,OAAJ,CAAa,OAAD,IAAY;AAC3B,MAAA,yBAAyB,CAAC,UAA1B,GAAuC,MAAK;AACxC,QAAA,QAAQ,CAAC,UAAT;AAEA,QAAA,OAAO,CAAC,yBAAyB,CAAC,WAA1B,KAA0C,CAA3C,CAAP;AACH,OAJD;;AAKA,MAAA,yBAAyB,CAAC,cAA1B;AACH,KAPM,CAAP;AAQH,GAxBD;AAyBH,CA7BM","sourceRoot":"","sourcesContent":["export const createTestOfflineAudioContextCurrentTimeSupport = (createNativeGainNode, nativeOfflineAudioContextConstructor) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return Promise.resolve(false);\n        }\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n        // Bug #48: Safari does not render an OfflineAudioContext without any connected node.\n        const gainNode = createNativeGainNode(nativeOfflineAudioContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: 0\n        });\n        // Bug #21: Safari does not support promises yet.\n        return new Promise((resolve) => {\n            nativeOfflineAudioContext.oncomplete = () => {\n                gainNode.disconnect();\n                resolve(nativeOfflineAudioContext.currentTime !== 0);\n            };\n            nativeOfflineAudioContext.startRendering();\n        });\n    };\n};\n//# sourceMappingURL=test-offline-audio-context-current-time-support.js.map"]},"metadata":{},"sourceType":"module"}