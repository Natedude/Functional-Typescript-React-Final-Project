{"ast":null,"code":"import { noOp } from \"../util/Interface\";\n/**\n * TransportEvent is an internal class used by [[Transport]]\n * to schedule events. Do no invoke this class directly, it is\n * handled from within Tone.Transport.\n */\n\nexport class TransportEvent {\n  /**\n   * @param transport The transport object which the event belongs to\n   */\n  constructor(transport, opts) {\n    /**\n     * The unique id of the event\n     */\n    this.id = TransportEvent._eventId++;\n    const options = Object.assign(TransportEvent.getDefaults(), opts);\n    this.transport = transport;\n    this.callback = options.callback;\n    this._once = options.once;\n    this.time = options.time;\n  }\n\n  static getDefaults() {\n    return {\n      callback: noOp,\n      once: false,\n      time: 0\n    };\n  }\n  /**\n   * Invoke the event callback.\n   * @param  time  The AudioContext time in seconds of the event\n   */\n\n\n  invoke(time) {\n    if (this.callback) {\n      this.callback(time);\n\n      if (this._once) {\n        this.transport.clear(this.id);\n      }\n    }\n  }\n  /**\n   * Clean up\n   */\n\n\n  dispose() {\n    this.callback = undefined;\n    return this;\n  }\n\n}\n/**\n * Current ID counter\n */\n\nTransportEvent._eventId = 0;","map":{"version":3,"sources":["../../../../Tone/core/clock/TransportEvent.ts"],"names":[],"mappings":"AACA,SAAS,IAAT,QAAqB,mBAArB;AAUA;;;;AAIG;;AACH,OAAM,MAAO,cAAP,CAAqB;AA2B1B;;AAEG;AACH,EAAA,WAAA,CAAY,SAAZ,EAAkC,IAAlC,EAAsE;AAvBtE;;AAEG;AACH,SAAA,EAAA,GAAa,cAAc,CAAC,QAAf,EAAb;AAsBC,UAAM,OAAO,GAA0B,MAAM,CAAC,MAAP,CAAc,cAAc,CAAC,WAAf,EAAd,EAA4C,IAA5C,CAAvC;AAEA,SAAK,SAAL,GAAiB,SAAjB;AACA,SAAK,QAAL,GAAgB,OAAO,CAAC,QAAxB;AACA,SAAK,KAAL,GAAa,OAAO,CAAC,IAArB;AACA,SAAK,IAAL,GAAY,OAAO,CAAC,IAApB;AACA;;AAEiB,SAAX,WAAW,GAAA;AACjB,WAAO;AACN,MAAA,QAAQ,EAAE,IADJ;AAEN,MAAA,IAAI,EAAE,KAFA;AAGN,MAAA,IAAI,EAAE;AAHA,KAAP;AAKA;AAOD;;;AAGG;;;AACH,EAAA,MAAM,CAAC,IAAD,EAAc;AACnB,QAAI,KAAK,QAAT,EAAmB;AAClB,WAAK,QAAL,CAAc,IAAd;;AACA,UAAI,KAAK,KAAT,EAAgB;AACf,aAAK,SAAL,CAAe,KAAf,CAAqB,KAAK,EAA1B;AACA;AACD;AACD;AAED;;AAEG;;;AACH,EAAA,OAAO,GAAA;AACN,SAAK,QAAL,GAAgB,SAAhB;AACA,WAAO,IAAP;AACA;;AAxEyB;AAgD1B;;AAEG;;AACY,cAAA,CAAA,QAAA,GAAW,CAAX","sourceRoot":"","sourcesContent":["import { noOp } from \"../util/Interface\";\n/**\n * TransportEvent is an internal class used by [[Transport]]\n * to schedule events. Do no invoke this class directly, it is\n * handled from within Tone.Transport.\n */\nexport class TransportEvent {\n    /**\n     * @param transport The transport object which the event belongs to\n     */\n    constructor(transport, opts) {\n        /**\n         * The unique id of the event\n         */\n        this.id = TransportEvent._eventId++;\n        const options = Object.assign(TransportEvent.getDefaults(), opts);\n        this.transport = transport;\n        this.callback = options.callback;\n        this._once = options.once;\n        this.time = options.time;\n    }\n    static getDefaults() {\n        return {\n            callback: noOp,\n            once: false,\n            time: 0,\n        };\n    }\n    /**\n     * Invoke the event callback.\n     * @param  time  The AudioContext time in seconds of the event\n     */\n    invoke(time) {\n        if (this.callback) {\n            this.callback(time);\n            if (this._once) {\n                this.transport.clear(this.id);\n            }\n        }\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        this.callback = undefined;\n        return this;\n    }\n}\n/**\n * Current ID counter\n */\nTransportEvent._eventId = 0;\n//# sourceMappingURL=TransportEvent.js.map"]},"metadata":{},"sourceType":"module"}