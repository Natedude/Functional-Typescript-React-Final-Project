{"ast":null,"code":"export const testAudioNodeDisconnectMethodSupport = nativeAudioContext => {\n  return new Promise(resolve => {\n    const analyzer = nativeAudioContext.createScriptProcessor(256, 1, 1);\n    const dummy = nativeAudioContext.createGain(); // Bug #95: Safari does not play one sample buffers.\n\n    const ones = nativeAudioContext.createBuffer(1, 2, 44100);\n    const channelData = ones.getChannelData(0);\n    channelData[0] = 1;\n    channelData[1] = 1;\n    const source = nativeAudioContext.createBufferSource();\n    source.buffer = ones;\n    source.loop = true;\n    source.connect(analyzer).connect(nativeAudioContext.destination);\n    source.connect(dummy);\n    source.disconnect(dummy); // tslint:disable-next-line:deprecation\n\n    analyzer.onaudioprocess = event => {\n      const chnnlDt = event.inputBuffer.getChannelData(0);\n\n      if (Array.prototype.some.call(chnnlDt, sample => sample === 1)) {\n        resolve(true);\n      } else {\n        resolve(false);\n      }\n\n      source.stop();\n      analyzer.onaudioprocess = null; // tslint:disable-line:deprecation\n\n      source.disconnect(analyzer);\n      analyzer.disconnect(nativeAudioContext.destination);\n    };\n\n    source.start();\n  });\n};","map":{"version":3,"sources":["../../../src/helpers/test-audio-node-disconnect-method-support.ts"],"names":[],"mappings":"AAEA,OAAO,MAAM,oCAAoC,GAAI,kBAAD,IAA8D;AAC9G,SAAO,IAAI,OAAJ,CAAa,OAAD,IAAY;AAC3B,UAAM,QAAQ,GAAG,kBAAkB,CAAC,qBAAnB,CAAyC,GAAzC,EAA8C,CAA9C,EAAiD,CAAjD,CAAjB;AAEA,UAAM,KAAK,GAAG,kBAAkB,CAAC,UAAnB,EAAd,CAH2B,CAK3B;;AACA,UAAM,IAAI,GAAG,kBAAkB,CAAC,YAAnB,CAAgC,CAAhC,EAAmC,CAAnC,EAAsC,KAAtC,CAAb;AAEA,UAAM,WAAW,GAAG,IAAI,CAAC,cAAL,CAAoB,CAApB,CAApB;AAEA,IAAA,WAAW,CAAC,CAAD,CAAX,GAAiB,CAAjB;AACA,IAAA,WAAW,CAAC,CAAD,CAAX,GAAiB,CAAjB;AAEA,UAAM,MAAM,GAAG,kBAAkB,CAAC,kBAAnB,EAAf;AAEA,IAAA,MAAM,CAAC,MAAP,GAAgB,IAAhB;AACA,IAAA,MAAM,CAAC,IAAP,GAAc,IAAd;AAEA,IAAA,MAAM,CAAC,OAAP,CAAe,QAAf,EAAyB,OAAzB,CAAiC,kBAAkB,CAAC,WAApD;AAEA,IAAA,MAAM,CAAC,OAAP,CAAe,KAAf;AACA,IAAA,MAAM,CAAC,UAAP,CAAkB,KAAlB,EArB2B,CAuB3B;;AACA,IAAA,QAAQ,CAAC,cAAT,GAA2B,KAAD,IAAU;AAChC,YAAM,OAAO,GAAG,KAAK,CAAC,WAAN,CAAkB,cAAlB,CAAiC,CAAjC,CAAhB;;AAEA,UAAI,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAqB,IAArB,CAA0B,OAA1B,EAAoC,MAAD,IAAoB,MAAM,KAAK,CAAlE,CAAJ,EAA0E;AACtE,QAAA,OAAO,CAAC,IAAD,CAAP;AACH,OAFD,MAEO;AACH,QAAA,OAAO,CAAC,KAAD,CAAP;AACH;;AAED,MAAA,MAAM,CAAC,IAAP;AAEA,MAAA,QAAQ,CAAC,cAAT,GAA0B,IAA1B,CAXgC,CAWA;;AAEhC,MAAA,MAAM,CAAC,UAAP,CAAkB,QAAlB;AACA,MAAA,QAAQ,CAAC,UAAT,CAAoB,kBAAkB,CAAC,WAAvC;AACH,KAfD;;AAiBA,IAAA,MAAM,CAAC,KAAP;AACH,GA1CM,CAAP;AA2CH,CA5CM","sourceRoot":"","sourcesContent":["export const testAudioNodeDisconnectMethodSupport = (nativeAudioContext) => {\n    return new Promise((resolve) => {\n        const analyzer = nativeAudioContext.createScriptProcessor(256, 1, 1);\n        const dummy = nativeAudioContext.createGain();\n        // Bug #95: Safari does not play one sample buffers.\n        const ones = nativeAudioContext.createBuffer(1, 2, 44100);\n        const channelData = ones.getChannelData(0);\n        channelData[0] = 1;\n        channelData[1] = 1;\n        const source = nativeAudioContext.createBufferSource();\n        source.buffer = ones;\n        source.loop = true;\n        source.connect(analyzer).connect(nativeAudioContext.destination);\n        source.connect(dummy);\n        source.disconnect(dummy);\n        // tslint:disable-next-line:deprecation\n        analyzer.onaudioprocess = (event) => {\n            const chnnlDt = event.inputBuffer.getChannelData(0);\n            if (Array.prototype.some.call(chnnlDt, (sample) => sample === 1)) {\n                resolve(true);\n            }\n            else {\n                resolve(false);\n            }\n            source.stop();\n            analyzer.onaudioprocess = null; // tslint:disable-line:deprecation\n            source.disconnect(analyzer);\n            analyzer.disconnect(nativeAudioContext.destination);\n        };\n        source.start();\n    });\n};\n//# sourceMappingURL=test-audio-node-disconnect-method-support.js.map"]},"metadata":{},"sourceType":"module"}