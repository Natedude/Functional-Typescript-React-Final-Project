{"ast":null,"code":"export const detachArrayBuffer = arrayBuffer => {\n  const {\n    port1,\n    port2\n  } = new MessageChannel();\n  return new Promise(resolve => {\n    const closeAndResolve = () => {\n      port2.onmessage = null;\n      port1.close();\n      port2.close();\n      resolve();\n    };\n\n    port2.onmessage = () => closeAndResolve();\n\n    try {\n      port1.postMessage(arrayBuffer, [arrayBuffer]);\n    } finally {\n      closeAndResolve();\n    }\n  });\n};","map":{"version":3,"sources":["../../../src/helpers/detach-array-buffer.ts"],"names":[],"mappings":"AAAA,OAAO,MAAM,iBAAiB,GAAI,WAAD,IAA4C;AACzE,QAAM;AAAE,IAAA,KAAF;AAAS,IAAA;AAAT,MAAmB,IAAI,cAAJ,EAAzB;AAEA,SAAO,IAAI,OAAJ,CAAa,OAAD,IAAY;AAC3B,UAAM,eAAe,GAAG,MAAK;AACzB,MAAA,KAAK,CAAC,SAAN,GAAkB,IAAlB;AAEA,MAAA,KAAK,CAAC,KAAN;AACA,MAAA,KAAK,CAAC,KAAN;AAEA,MAAA,OAAO;AACV,KAPD;;AASA,IAAA,KAAK,CAAC,SAAN,GAAkB,MAAM,eAAe,EAAvC;;AAEA,QAAI;AACA,MAAA,KAAK,CAAC,WAAN,CAAkB,WAAlB,EAA+B,CAAC,WAAD,CAA/B;AACH,KAFD,SAEU;AACN,MAAA,eAAe;AAClB;AACJ,GAjBM,CAAP;AAkBH,CArBM","sourceRoot":"","sourcesContent":["export const detachArrayBuffer = (arrayBuffer) => {\n    const { port1, port2 } = new MessageChannel();\n    return new Promise((resolve) => {\n        const closeAndResolve = () => {\n            port2.onmessage = null;\n            port1.close();\n            port2.close();\n            resolve();\n        };\n        port2.onmessage = () => closeAndResolve();\n        try {\n            port1.postMessage(arrayBuffer, [arrayBuffer]);\n        }\n        finally {\n            closeAndResolve();\n        }\n    });\n};\n//# sourceMappingURL=detach-array-buffer.js.map"]},"metadata":{},"sourceType":"module"}