{"ast":null,"code":"export const createEventTargetConstructor = wrapEventListener => {\n  return class EventTarget {\n    constructor(_nativeEventTarget) {\n      this._nativeEventTarget = _nativeEventTarget;\n      this._listeners = new WeakMap();\n    }\n\n    addEventListener(type, listener, options) {\n      if (listener !== null) {\n        let wrappedEventListener = this._listeners.get(listener);\n\n        if (wrappedEventListener === undefined) {\n          wrappedEventListener = wrapEventListener(this, listener);\n\n          if (typeof listener === 'function') {\n            this._listeners.set(listener, wrappedEventListener);\n          }\n        }\n\n        this._nativeEventTarget.addEventListener(type, wrappedEventListener, options);\n      }\n    }\n\n    dispatchEvent(event) {\n      return this._nativeEventTarget.dispatchEvent(event);\n    }\n\n    removeEventListener(type, listener, options) {\n      const wrappedEventListener = listener === null ? undefined : this._listeners.get(listener);\n\n      this._nativeEventTarget.removeEventListener(type, wrappedEventListener === undefined ? null : wrappedEventListener, options);\n    }\n\n  };\n};","map":{"version":3,"sources":["../../../src/factories/event-target-constructor.ts"],"names":[],"mappings":"AAGA,OAAO,MAAM,4BAA4B,GAAoC,iBAAD,IAAsB;AAC9F,SAAO,MAAM,WAAN,CAAiB;AAGpB,IAAA,WAAA,CAAoB,kBAApB,EAA0D;AAAtC,WAAA,kBAAA,GAAA,kBAAA;AAChB,WAAK,UAAL,GAAkB,IAAI,OAAJ,EAAlB;AACH;;AAEM,IAAA,gBAAgB,CACnB,IADmB,EAEnB,QAFmB,EAGnB,OAHmB,EAGwB;AAE3C,UAAI,QAAQ,KAAK,IAAjB,EAAuB;AACnB,YAAI,oBAAoB,GAAG,KAAK,UAAL,CAAgB,GAAhB,CAAoB,QAApB,CAA3B;;AAEA,YAAI,oBAAoB,KAAK,SAA7B,EAAwC;AACpC,UAAA,oBAAoB,GAAG,iBAAiB,CAAC,IAAD,EAAO,QAAP,CAAxC;;AAEA,cAAI,OAAO,QAAP,KAAoB,UAAxB,EAAoC;AAChC,iBAAK,UAAL,CAAgB,GAAhB,CAAoB,QAApB,EAA8B,oBAA9B;AACH;AACJ;;AAED,aAAK,kBAAL,CAAwB,gBAAxB,CAAyC,IAAzC,EAA+C,oBAA/C,EAAqE,OAArE;AACH;AACJ;;AAEM,IAAA,aAAa,CAAC,KAAD,EAAa;AAC7B,aAAO,KAAK,kBAAL,CAAwB,aAAxB,CAAsC,KAAtC,CAAP;AACH;;AAEM,IAAA,mBAAmB,CACtB,IADsB,EAEtB,QAFsB,EAGtB,OAHsB,EAGkB;AAExC,YAAM,oBAAoB,GAAG,QAAQ,KAAK,IAAb,GAAoB,SAApB,GAAgC,KAAK,UAAL,CAAgB,GAAhB,CAAoB,QAApB,CAA7D;;AAEA,WAAK,kBAAL,CAAwB,mBAAxB,CAA4C,IAA5C,EAAkD,oBAAoB,KAAK,SAAzB,GAAqC,IAArC,GAA4C,oBAA9F,EAAoH,OAApH;AACH;;AAvCmB,GAAxB;AAyCH,CA1CM","sourceRoot":"","sourcesContent":["export const createEventTargetConstructor = (wrapEventListener) => {\n    return class EventTarget {\n        constructor(_nativeEventTarget) {\n            this._nativeEventTarget = _nativeEventTarget;\n            this._listeners = new WeakMap();\n        }\n        addEventListener(type, listener, options) {\n            if (listener !== null) {\n                let wrappedEventListener = this._listeners.get(listener);\n                if (wrappedEventListener === undefined) {\n                    wrappedEventListener = wrapEventListener(this, listener);\n                    if (typeof listener === 'function') {\n                        this._listeners.set(listener, wrappedEventListener);\n                    }\n                }\n                this._nativeEventTarget.addEventListener(type, wrappedEventListener, options);\n            }\n        }\n        dispatchEvent(event) {\n            return this._nativeEventTarget.dispatchEvent(event);\n        }\n        removeEventListener(type, listener, options) {\n            const wrappedEventListener = listener === null ? undefined : this._listeners.get(listener);\n            this._nativeEventTarget.removeEventListener(type, wrappedEventListener === undefined ? null : wrappedEventListener, options);\n        }\n    };\n};\n//# sourceMappingURL=event-target-constructor.js.map"]},"metadata":{},"sourceType":"module"}