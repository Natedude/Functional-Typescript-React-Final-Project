{"ast":null,"code":"import { ToneAudioNode } from \"../../core/context/ToneAudioNode\";\nimport { optionsFromArguments } from \"../../core/util/Defaults\";\nimport { Solo } from \"./Solo\";\nimport { PanVol } from \"./PanVol\";\nimport { readOnly } from \"../../core/util/Interface\";\nimport { Gain } from \"../../core/context/Gain\";\n/**\n * Channel provides a channel strip interface with volume, pan, solo and mute controls.\n * See [[PanVol]] and [[Solo]]\n * @example\n * // pan the incoming signal left and drop the volume 12db\n * const channel = new Tone.Channel(-0.25, -12);\n * @category Component\n */\n\nexport class Channel extends ToneAudioNode {\n  constructor() {\n    super(optionsFromArguments(Channel.getDefaults(), arguments, [\"volume\", \"pan\"]));\n    this.name = \"Channel\";\n    const options = optionsFromArguments(Channel.getDefaults(), arguments, [\"volume\", \"pan\"]);\n    this._solo = this.input = new Solo({\n      solo: options.solo,\n      context: this.context\n    });\n    this._panVol = this.output = new PanVol({\n      context: this.context,\n      pan: options.pan,\n      volume: options.volume,\n      mute: options.mute,\n      channelCount: options.channelCount\n    });\n    this.pan = this._panVol.pan;\n    this.volume = this._panVol.volume;\n\n    this._solo.connect(this._panVol);\n\n    readOnly(this, [\"pan\", \"volume\"]);\n  }\n\n  static getDefaults() {\n    return Object.assign(ToneAudioNode.getDefaults(), {\n      pan: 0,\n      volume: 0,\n      mute: false,\n      solo: false,\n      channelCount: 1\n    });\n  }\n  /**\n   * Solo/unsolo the channel. Soloing is only relative to other [[Channels]] and [[Solo]] instances\n   */\n\n\n  get solo() {\n    return this._solo.solo;\n  }\n\n  set solo(solo) {\n    this._solo.solo = solo;\n  }\n  /**\n   * If the current instance is muted, i.e. another instance is soloed,\n   * or the channel is muted\n   */\n\n\n  get muted() {\n    return this._solo.muted || this.mute;\n  }\n  /**\n   * Mute/unmute the volume\n   */\n\n\n  get mute() {\n    return this._panVol.mute;\n  }\n\n  set mute(mute) {\n    this._panVol.mute = mute;\n  }\n  /**\n   * Get the gain node belonging to the bus name. Create it if\n   * it doesn't exist\n   * @param name The bus name\n   */\n\n\n  _getBus(name) {\n    if (!Channel.buses.has(name)) {\n      Channel.buses.set(name, new Gain({\n        context: this.context\n      }));\n    }\n\n    return Channel.buses.get(name);\n  }\n  /**\n   * Send audio to another channel using a string. `send` is a lot like\n   * [[connect]], except it uses a string instead of an object. This can\n   * be useful in large applications to decouple sections since [[send]]\n   * and [[receive]] can be invoked separately in order to connect an object\n   * @param name The channel name to send the audio\n   * @param volume The amount of the signal to send.\n   * \tDefaults to 0db, i.e. send the entire signal\n   * @returns Returns the gain node of this connection.\n   */\n\n\n  send(name, volume = 0) {\n    const bus = this._getBus(name);\n\n    const sendKnob = new Gain({\n      context: this.context,\n      units: \"decibels\",\n      gain: volume\n    });\n    this.connect(sendKnob);\n    sendKnob.connect(bus);\n    return sendKnob;\n  }\n  /**\n   * Receive audio from a channel which was connected with [[send]].\n   * @param name The channel name to receive audio from.\n   */\n\n\n  receive(name) {\n    const bus = this._getBus(name);\n\n    bus.connect(this);\n    return this;\n  }\n\n  dispose() {\n    super.dispose();\n\n    this._panVol.dispose();\n\n    this.pan.dispose();\n    this.volume.dispose();\n\n    this._solo.dispose();\n\n    return this;\n  }\n\n}\n/**\n * Store the send/receive channels by name.\n */\n\nChannel.buses = new Map();","map":{"version":3,"sources":["../../../../Tone/component/channel/Channel.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { ToneAudioNode } from \"../../core/context/ToneAudioNode\";\nimport { optionsFromArguments } from \"../../core/util/Defaults\";\nimport { Solo } from \"./Solo\";\nimport { PanVol } from \"./PanVol\";\nimport { readOnly } from \"../../core/util/Interface\";\nimport { Gain } from \"../../core/context/Gain\";\n/**\n * Channel provides a channel strip interface with volume, pan, solo and mute controls.\n * See [[PanVol]] and [[Solo]]\n * @example\n * // pan the incoming signal left and drop the volume 12db\n * const channel = new Tone.Channel(-0.25, -12);\n * @category Component\n */\nexport class Channel extends ToneAudioNode {\n    constructor() {\n        super(optionsFromArguments(Channel.getDefaults(), arguments, [\"volume\", \"pan\"]));\n        this.name = \"Channel\";\n        const options = optionsFromArguments(Channel.getDefaults(), arguments, [\"volume\", \"pan\"]);\n        this._solo = this.input = new Solo({\n            solo: options.solo,\n            context: this.context,\n        });\n        this._panVol = this.output = new PanVol({\n            context: this.context,\n            pan: options.pan,\n            volume: options.volume,\n            mute: options.mute,\n            channelCount: options.channelCount\n        });\n        this.pan = this._panVol.pan;\n        this.volume = this._panVol.volume;\n        this._solo.connect(this._panVol);\n        readOnly(this, [\"pan\", \"volume\"]);\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            pan: 0,\n            volume: 0,\n            mute: false,\n            solo: false,\n            channelCount: 1,\n        });\n    }\n    /**\n     * Solo/unsolo the channel. Soloing is only relative to other [[Channels]] and [[Solo]] instances\n     */\n    get solo() {\n        return this._solo.solo;\n    }\n    set solo(solo) {\n        this._solo.solo = solo;\n    }\n    /**\n     * If the current instance is muted, i.e. another instance is soloed,\n     * or the channel is muted\n     */\n    get muted() {\n        return this._solo.muted || this.mute;\n    }\n    /**\n     * Mute/unmute the volume\n     */\n    get mute() {\n        return this._panVol.mute;\n    }\n    set mute(mute) {\n        this._panVol.mute = mute;\n    }\n    /**\n     * Get the gain node belonging to the bus name. Create it if\n     * it doesn't exist\n     * @param name The bus name\n     */\n    _getBus(name) {\n        if (!Channel.buses.has(name)) {\n            Channel.buses.set(name, new Gain({ context: this.context }));\n        }\n        return Channel.buses.get(name);\n    }\n    /**\n     * Send audio to another channel using a string. `send` is a lot like\n     * [[connect]], except it uses a string instead of an object. This can\n     * be useful in large applications to decouple sections since [[send]]\n     * and [[receive]] can be invoked separately in order to connect an object\n     * @param name The channel name to send the audio\n     * @param volume The amount of the signal to send.\n     * \tDefaults to 0db, i.e. send the entire signal\n     * @returns Returns the gain node of this connection.\n     */\n    send(name, volume = 0) {\n        const bus = this._getBus(name);\n        const sendKnob = new Gain({\n            context: this.context,\n            units: \"decibels\",\n            gain: volume,\n        });\n        this.connect(sendKnob);\n        sendKnob.connect(bus);\n        return sendKnob;\n    }\n    /**\n     * Receive audio from a channel which was connected with [[send]].\n     * @param name The channel name to receive audio from.\n     */\n    receive(name) {\n        const bus = this._getBus(name);\n        bus.connect(this);\n        return this;\n    }\n    dispose() {\n        super.dispose();\n        this._panVol.dispose();\n        this.pan.dispose();\n        this.volume.dispose();\n        this._solo.dispose();\n        return this;\n    }\n}\n/**\n * Store the send/receive channels by name.\n */\nChannel.buses = new Map();\n//# sourceMappingURL=Channel.js.map"]},"metadata":{},"sourceType":"module"}